---
layout: horizontal
title: 小議輸入法碼表構成
tags:
- 電腦
- 斯文
categories:
- 挨踢
- 自選集
date: 2012/11/01 16:48:00
---
（本文繼續發揮我一貫的特點：長於理論，弱於實踐。）  
我是每天打字量基本上都破千，有時近萬的人，因此輸入法對我來說非常之重要，是電腦上最重要的一個軟件。但問題在於，目前還沒有任何一款輸入法和一款輸入模式讓我感到非常滿意。  
之前我寫過兩篇討論輸入法的文章，不過其中關注的輸入法，現在祇關注一個 QQ 拼音了。 QQ 拼音確實是安逸的輸入法，我使用小鶴雙拼方案+智能 ABC 筆劃+造詞功能，感到還算便捷。不過 QQ 拼音有幾個問題我難以迴避：第一，不是原生的繁體輸入法，而是使用函數轉換獲得繁體，因而其繁體字或有用錯。第二，沒有 Linux 版。第三，是騰訊公司出品，可能受到監控（搞得我每次打點什麼東西都想着要不要切換到別的輸入法）。第四，不支持 asdfghjkl; 選字。帶着這些問題，我繼續尋找輸入法。  
跳過尋找過程，反正我找到了兩個軟件方案： rime 和 gcin/hime/OpenVanilla/雅虎奇摩。 gcin/hime/OpenVanilla/雅虎奇摩不是一個輸入法，是四個啦。他們基本上都是 OpenVanilla 及其衍生物。可以共用碼表，都使用 .cin 來添加自己心儀的輸入方案。如果問我有什麼共同缺點，那就是他們的繁體字不符合清代以上的習慣，而是臺灣標準。我的網站有很多異體字（而非正體字），就是長期使用各種該死的輸入法造成的。 rime 是一個中國人開發的，但其繁體比臺灣的輸入法好，除了個別細節尚未顧及，其餘都還不錯。但他也有一個毛病，就是由於是 one man 項目，人力資源不足，所以細節處理很差。但事實上兩個軟件方案在一個方面都做得不太好：造詞功能。造詞不是說造點中文詞就好，我需要造出類似 [=A] 這樣的詞，這是我是用方正書版排版文章的標記語言，而且使用頻率極高——這是我自定義的人名、地名符號的標記開頭，在人名多的時候可以想像那滿屏的 [=A] 有多可怕。 QQ 拼音可以鼠標幾下就定義出來，而別的輸入法就不能。另外，對於標點符號我有一個執著。那就是，我打標點的時候不喜歡選字，而喜歡敲鍵盤上最基本的那 30 個按鍵出符號。對於引號，我在 QQ 拼音定義爲 af 和 ak ，打起來就像打字。而別的輸入法則需要按 [] 這是我無法盲打的符號，要解決就要寫入碼表，顯得比較麻煩。  
不過不管是 rime 還是 gcin ，他們都是「輸入法平臺」，換言之，如果你對現有碼表不滿意，是可以肆意更換的。所以纔會引發我對製作碼表的討論。先前，我已經粗略的[討論](../imes)過音碼和形碼。現在我再來重申一下我的觀點：  
音碼的缺點：重碼率極高，有時碼長略長。  
形碼的缺點：字根難記（嘸蝦米略好），拆字/取碼邏輯不科學甚至很隨意（鄭碼較好）。另外說一個糾結處：詞語在形碼真的很麻煩，碼長如果不固定，無法盲打詞語。如果固定，那麼一般是四碼一字，或者詞語有專用的碼，都是搞死人的。如果好記又好拆，說明你在用筆順五碼或手機上的筆畫輸入法，碼長比音碼還長，而且碼表裏的字很少。  
現在，我希望有一款容易學，重碼率也不是太高的輸入法。我**不重復發明輪子**，全部取材於既有拆解方式而加以改進（如果不基於既有方式，碼表也很難製作）。另外，我對用鍵有很高的要求，必須僅使用 26 個英文字母來完成編碼，最多再加上分號（不能像注音、行列那樣用到數字和逗號句號，否則不利於標點符號快速輸入，也不能用其他按鍵，因爲太難按）。碼長方面，最好是固定的，最長不要超過四，最好是三，打起來比較輕鬆。還有就是字詞不分：很多形碼因爲碼長的關係，敲詞的時候會用簡碼，這會增加記憶量，不喜歡。由於碼長爲三的編碼，其理論容量爲 4056 ，小於我的識字量，所以重碼在所難免，但祇要能達到拼音的 1/5 左右，加上詞語組合，重碼也沒那麼可怕。  
我當然不想去記憶複雜的形碼或理解詭異的形碼拆字邏輯，而且，一般人打字的時候心裏更多的是想字的讀音，而非形狀，又特別是全局的形狀，所以音碼還是基礎。而且，音碼我們已經有了兩套非常公認的碼表：漢語拼音和注音。學習音碼是非常輕鬆愉快的。  
音碼碼長的問題，事實上早已不存在了。早期的微軟和智能開闢了道路，接着自然、加加等逐步優化。現在有了舒服的小鶴，基本上已經沒必要再出新花樣。對於難字不多且輸入法中未集成句子的情況（即進行一般創作的情況），我的小鶴雙拼輸入速度大概是 75/min ，並不比普通用形碼的慢。固定的碼長也有利於輸入長串中文，而不會出現「西安」和「仙」不分的問題。**音碼到了雙拼，可說是走到了盡頭。**形碼方面，卻還沒有一款好記又好拆的輸入法。  
但音形結合方面，往往不是太簡略，就是不好記——比如小鶴雙形，他的形碼就不太好記。  
我們再回頭看看注音。注音的碼長爲 2-4 ，比漢語拼音的 1-6 合理。而且由於帶了聲調，重碼率大幅下降——特別是整詞輸入時，效果尤其明顯。去掉不常用的輕聲，對二字詞仍有 16 種組合，相當滿意了。不過如果你一定要玩「近世進士盡是近視」這種惡趣味，我也沒有辦法——但也比「施氏食獅史」好吧？於是我想到了第一個雙拼升級方案：**小鶴聲調：碼長爲三，前兩碼用小鶴雙拼，最後一碼用 dfjkl 代表五種常用聲調。** dfjkl是鍵盤上最輕鬆的鍵位，選他們純粹是舒服而已。  
當然了，如前所述，「近世進士盡是近視」還是有很高的重碼率，我也很想稍微修改。於是我想起了智能 ABC 的形碼。其實他這套形碼還是不錯的，簡單易記，快速上手。與之類似的還有拼音加加的輔助碼。不過，由於二者都是閉源的，我無法獲得其碼表，所以還是不用了。那用什麼好？首先想到的是四角號碼——這是多位真正的中國學學者讚賞的方案，儘管多有不合理處，卻也算比較合理了。對於很多人而言，反正本來就會，不用再學，省去很多麻煩。好了，這就是第二個雙拼升級方案：**小鶴四角：在小鶴雙拼的基礎上，像智能 ABC 一樣選擇性使用四角號碼的數字來降低重碼。**不過這就有個問題，那就是對輸入法引擎的要求很高，他必須能夠同時使用兩套碼表。智能 ABC 當然實現了， QQ 拼音也實現了，但我還沒有發現哪個開源輸入法實現。  
況且，敲數字對手指的壓力還是比較大的，所以我平時打雙拼也很少加形碼的部分。如果我把 1234567890 移到 asdfghjkl; ，那就舒服多了——這是很多臺灣的輸入法的做法，不過他們是用在選字上。來吧，第三套方案：**小鶴一角：碼長爲三，前兩碼用小鶴雙拼，最後一碼取四角號碼的第一碼，並把 1234567890 映射到 asdfghjkl; 。**  
很顯然，三碼的小鶴聲調和小鶴一角都有一個毛病：第三碼很浪費。一個僅用了五個字母，一個僅用了十個，實在不合算。腫麼辦？再看我的**鶴調一角：碼長爲三，前兩碼用小鶴雙拼，最後一碼把四角號碼的 0 和 3 合併爲 3 ， 8 和 9 合併爲 9 ，然後映射到英文鍵盤，平聲字用 asdfghjk ，上聲字和輕聲字用 zxcvbnml ，去聲字用 qwertyui 。**爲什麼這麼做呢？四角號碼裏， 0 爲點下有橫， 3 爲點，其實寬泛來講，所有 0 都是 3 。 8 是八形， 9 是小形，長得比較相似。輕聲字和上聲字比較少就放一起，而且輕聲的調值一般是 31 或者 21 ，而上聲在句子中是 21 ，聽感來講比較接近。由於鍵盤的最後一行祇有七個字母，所以我就把去聲的 8 放到 l 了，好按嘛。這種把四角和聲調結合起來的方法是得到了行列輸入法的啟發，不過我的比他簡單太多了。這個方案的重碼率肯定不高了，拼音有四百多個有意義的組合，三古專業畢業的人識字量在 5000-10000 區間內較多，攤下來重碼是 12-25 ，由於分佈不均勻，多的重碼會超過 50 。但鶴調一角加了第三碼共 24 種，就算遇到集中分佈，重碼一般能控制在 10 以內，也就是輸入法的一頁。對於兩字詞，本來帶聲調的兩字詞重碼率已經很低，還加上 64 種組合，簡直太難遇到重碼了——只要把一個合適自己的大詞庫掛上（比如我比較適合用一個普通繁體詞庫，加一個漢語大詞典詞庫，再加一個包含論孟荀老莊等常用典籍語句的詞庫），就不用管選字了。最後，由於詞庫可能加得太多，導致重碼上升，問題也不大，添上一個智能 ABC 已經實現的空格開始選字邏輯，然後每頁顯示 26 個候選詞，選項用 asdfghjklqwertyuiopzxcvbnm 的順序來選（這個順序比 abcd...xyz 優秀，因爲最常用的選項不怎麼需要移動手指），保證多大的詞庫都一頁搞定。而且，邪惡的是對於雙拼和四角號碼同時掌握的用戶來說，不需要學習，僅需要熟練。不過缺點就是，平聲字的重碼率比較高，分佈不太均勻。雙拼本身也對碼有些浪費。  
鶴調一角當然還是有重碼的，而且碼表的製作有一定挑戰性（當然我還是能利用我淺薄的 excel+regex 水平做出來），但有沒有一個重碼更低的三碼好記方案？答案是肯定的。那就是**小鶴康熙：前兩碼用小鶴雙拼，最後一碼用康熙字典部首的小鶴雙拼首字母，多音部首取康熙字典解釋的第一種。**爲什麼不是小鶴倉頡、小鶴蝦米、小鶴五筆、小鶴鄭碼？因爲即使是最好拆字的鄭碼，他也是「字根理論」構建的，而不是書寫和查詢習慣的部首。而且，越是科學拆字的形碼，他的字根就越難記，並不舒服。但若改用我們熟悉的部首，就不存在拆字和字根問題，祇有用家會不會讀那個部首的問題——如果是識字量很大的雙拼用戶，根本就是零記憶量。我從自己的情況來看， 214 個部首，我本來就能讀對的有 175 個，剩下的也能猜對一半以上的聲母。不過小鶴康熙的重碼率高於鶴調一角，因爲部首的發音並未佔滿 26 字母，而且分佈更不均勻。  
不會四角號碼，識字量小？試試**小鶴筆順：前兩碼用小鶴雙拼，最後一碼用筆順五碼，但按鍵爲 dfjkl 。**  
好吧，其實我還有一個更加無聊的方案：**小鶴瞎搞：前兩碼用小鶴雙拼，最後一碼可以自由的選擇是用四角號碼 (qwertyuiop) 或聲調 (dfjkl) 或筆順五碼 (xcvnm) ，或打 h 相當於純雙拼。**這麼變態的碼表大概只有我想得出……這個方案等於合併了小鶴聲調、小鶴四角、小鶴筆順的碼表，但最後一鍵安排在不同區位。  
好了，這篇文章包含的方案從頭到尾都在討論一件事：一個三碼且前兩碼是小鶴雙拼的輸入法的第三碼到底要加什麼。  

有用文件集：  
中央研究院文獻處理實驗室所提供的開源文字構型數據： http://cdp.sinica.edu.tw/hanzi/cdphanzi.htm  
深藍詞庫轉換： http://studyzy.cnblogs.com/ http://code.google.com/p/imewlconverter/downloads/list  
OpenVanilla: http://openvanilla.googlecode.com/svn/trunk/Modules/SharedData/  
Unihan: http://www.unicode.org/Public/UNIDATA/Unihan.zip  
OpenCC: http://code.google.com/p/opencc/ https://github.com/BYVoid/OpenCC  
Rimime: http://code.google.com/p/rimeime/downloads/list  
VimIM: http://code.google.com/p/vimim/downloads/list  
Gcin: http://cle.linux.org.tw/trac/wiki/GcinTables  
CEDICT: http://www.mdbg.net/chindict/chindict.php?page=cedict  
我的一些收集和整理： http://code.google.com/p/flyime/downloads/list  