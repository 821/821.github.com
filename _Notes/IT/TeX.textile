---
layout: indexed
title: TeX 傳統版式寫作的曲折道路
tags:
- 電腦
date: '2013/03/11'
---
（文章動筆於 2013/02/25 ，修訂於 2014/11/18 ——主要是做更新和一些減法。）
本文的主題是用 TeX 進行傳統版式寫作。分析一下句子成分，首先是「寫作」而不是單純排版，其次所寫內容排出來是傳統版式的。鑒於這個特殊到變態的需求，使用 TeX 或至少 TeX like 軟件是必然的。每個人需求不同，取捨也不同。我會從我的角度來讚揚 TeX ，吐槽其他，一切吐槽不具普遍性。
本文書寫重點是網絡上較少談到，或較少以我能正常閱讀的文字爲載體討論的。本文某些部分會摻入一些 TeX 的 tips 或者 links ——原則上所有 tips 都是原創的。

本文的不適宜人群：
一、沒有開源軟件使用經驗的
二、沒有耐心的
三、沒有獨特美學價值的
四、思想過於正常的
五、熱愛 Microsoft Word 或 Adobe InDesign 的
六、對吐槽沒有耐受性的
七、打算直接通過本文入門 TeX 的
七點五、 Mac 用戶——抱歉我完全把 Mac 相關的東西忽略了，因爲我從來都用 PC

h2. 缺點

個人認爲，介紹一款軟件不應從優點說起，而是缺點。因爲受衆先瞭解了缺點，就能從而及時放棄。不過這裏僅僅羅列我個人認爲是缺點的，如果讀者認爲 WYTIWYG 算缺點，最好不要看本站任何一篇有關電腦的文章。

h3. 學習曲線

像 Word 那樣，一個半文盲民工打開軟件，打一段話，點點鼠標，就能排出點什麼東西，有時看看還挺複雜。這是商業軟件的特點，一開始給你一點美好憧憬，到你習慣了、捨不得丟開了，纔知道有多難。
TeX 就不能這樣，什麼文檔也不讀的話，最簡單的東西都不能排。

h3. 麻煩

TeX 囉嗦程度略小於 html 。但事實上我更常用 html ，而非 TeX 。爲什麼？
首先， html 不存在編譯問題，開頭、結尾聲明不錯就行。 TeX 則涉及命令定義和宏包等問題，較複雜，失敗率高。
其次，雖然 html 和 TeX 都有點囉嗦，但 html 有簡化的 markdown 和 textile ， TeX 沒有。

h3. 一切皆 beta

對於很多商業軟件，比如同類型的方正書版，或 Adobe InDesign ，再或毫無干系但常有人拿來對比的 Office ，他們都有個特點：從某個版本起，就有一種較穩定的感覺了。方正書版，現在很多人還在用上世紀的版本；而 Office ，使用 2003 和 2007 的非常多； Adobe InDesign 用戶也往往不那麼急着更新。爲什麼？穩定了，就不追求升級了。
這在 TeX 世界完全不可行。就說中文，十年前還在 CCT ，後來 CJK ，再後來 pTeX 和 XeTeX ，現在是 LuaTeX-ja 和 XeTeX 平分秋色。所學知識兩三年要大更新一次。就像很多母程序猿的抱怨一樣：生完小猿回來，什麼都不會了。公猿如果休假長一點也會這樣。
特別是中文直排這種小衆需求，現在還有很多問題，用戶自己也會期待更新。

h3. 永遠有那麼一點點區別

TeX 可以排得很美，也可以比 Word 還醜。美醜間是一些初學者不容易掌握的細微設置和環境差異。
在網上看到別人一個極美觀的排版時，不要過度雞凍，因爲我們排不出的可能性是 99% ——除非你能把對方的環境和設置完美 copy 到自己電腦裏。有點差別還算好情況了，更糟的是編譯失敗……

h3. 坑爹的環境，龐雜的體系

TeX 是開源軟件體系。開源軟件已經夠坑爹了，而「開源軟件體系」有多坑爹，可想而知。
一個可運行的 TeX 環境，文件數量一般都上萬，體積當然也不小。對於單文件綠色版的用戶來說，無疑是痛苦的。
都是 TeX 的子孫，引擎一換，很多宏包無法互通，自己寫命令的時候也要很小心。如果要從 LaTeX 跳槽 ConTeXt ，會有一段時間感到無所適從的。
更該死的是，很多在模版製作過程中需要的文檔並不那麼好找，或者找到了卻發現不是英文的，再或者根本沒文檔。

h3. 中文、中式排版資源匱乏

中國人缺乏鑽研精神，對美的要求也不高，所以 TeX 的中文資源相對較少。
由於 TeX 是針對西方語言編寫的，對傳統中式排版並非先天支持，這本來需要一個強大的本地社區，偏偏這社區很弱小。所以排 TeX 是個苦差。

h2. 爲了這些就別看 TeX 了

h3. 爲幾個破式子或化學結構式學 TeX

Word 2007 開始支持 TeX 式的公式輸入。化學用 ChemDraw 。

h3. 無規律複雜文檔

如果你要排板報、書籍封面等花式較多且規律性比較弱，而且也就幾頁的東西，用 InDesign, PhotoShop, Microsoft Visio, 方正飛騰即可，不要到 TeX 下折騰。事倍功半。

h3. 其他軟件能完美實現並高效便捷修改的

比如中文直排，如果你不像我一樣需要一大堆複雜的規則化板式，如眉批、夾批、夾注、書耳之類，而僅僅是要一個最簡單的直排，何必 TeX 呢。 TeX 的學習成本是最高的。

h2. 用戶條件

TeX 主要是給研究人員用的，本文討論的又是複雜的中/日式排版（ frankly speaking ，我要實現的東西更像日式排版），自然更加難排，所以對用戶也是有點條件的。
一、無障礙閱讀英文科技短文（必須）
二、耐心（必須）
三、對編碼、字體有基本瞭解（要弄點字體則必須）
四、開源軟件使用經驗（幾乎必須，因爲 TeX 的鼓搗過程跟這個很像）
五、習慣邊構思邊打字（非必須，但如果非要先寫手稿纔上機，還眞比較痛苦）
六、初中平面幾何無不及格記錄（非必須，但如想弄點複雜的東西， rotatebox 命令、 geometry 宏包或類似都東西一來，估計夠嗆）
七、腦袋從未被驢踢過或門夾過（必須，比如有人堅持認爲在 InDesign 裏一個一個加樣式比用文本編輯器批量替換容易，我還眞沒辦法了）
順帶說一下，雖然我不認爲 TeX 太難，不過臺灣有個叫侯捷的程序猿，因覺 TeX 難，就用 Word ，還出了一本叫「 Word 排版藝術」的書。 Word 當然不能排版，也無藝術可言，不過這也從一個側面說明 TeX 非人人可以輕易掌握。

h2. 優點

如果還沒嚇退讀者，這位讀者必定心靈堅強，對美有自己的追求，九成以上可能性是研究生/博士生/研究機構人員/獨立研究員/有計畫從事研究的大學生/出版業工作者/電腦狂人，這些人多數都符合條件，可以瞭解一下 TeX 的優點並考慮使用。

h3. 善於處理巨著

我們都知道 Word 處理長篇文檔時多麼不可愛。 TeX 的文件都是文本文檔，而且你可以做成一章一個文件，然後整體一起編譯。
不過換句話說，排一兩頁臨時文件沒必要使用 TeX ，排長篇且比較挑剔的再 TeX 。

h3. 遠離版權糾紛

前面提到的其他軟件都是商業軟件，要錢的。如果你是學生或者居住在中國當然無所謂，但若跑到美國去做研究，至少美國盜版軟件是有風險的。
不過別用商業字體文件，還有如果你的文本編輯器和作圖軟件是商業軟件我也沒辦法。

h3. 高精度

TeX 本來就是一個挑剔強迫症患者主持開發的，所以適合高精度排版。軟件設計的時候，精度爲 sp ，什麼概念呢， 65536 sp = 1 pt 。
不過要小心的是現在中國出的宏包一般精度達不到出版級別，建議看日本的。
Office 做不到 TeX 的精度， InDesign 做得到但一般用戶也不可能做到。

h3. 祕書式人機交互

假設你寫了一本曠世巨著，叫你的祕書做成 PDF ，你會怎麼說？
你肯定這麼說的：把大章節給我用一號字、黑體，小章節用三號字、黑體、下劃線，正文用四號字、宋體，奇數頁用大章节標題做頁眉，偶數頁用書名，章節末尾如果是奇數頁就加一頁空白，後面做個人名索引，前面做個目錄，還有參考文獻幫我用 MLA 格式整理一下。
於是祕書打開他的 Word 或者 InDesign ，想着你的吩咐，先把全文設置成四號宋體，然後找到第一章，改成一號黑體，再找到第一章第一節，改成三號黑體下劃線，如此類推。他伸伸懶腰，把各章節頁數找一下，做了一個目錄並逐個改好頁眉和章節末尾，又上網看看 MLA 格式的要求，幫你改好。最後帶着詛咒的心情熬夜一個一個的查了人名，做了索引。
來到 TeX ，你寫文章的時候，寫到大章節，就標記一下，這是大章節；到了人名，再標記一下，這是人名。最後軟件會按照你的構想把需要的樣式排出來。

h3. 後期調整

回到你和祕書那個 case 。
說不定過了兩天，你又不滿意了，於是對祕書說：小祕，我看小日本的花園明朝體挺漂亮，你給我把正文和小章節換一下，開本改成 B5 ，參考文獻格式換哈佛，還有我又加了兩段話。
於是祕書抓狂了。字體全要換，目錄、索引、參考文獻都要重做……
如果你沒有祕書，抓狂的就是你自己。
所以 Word 和 InDesign 的用戶多半不能對美過於執着，又尤其不能有千變萬化的心情和設計。當然，現在 Word 的宏是不錯的，有些東西可以比較方便的批量處理，不至於像前面那位祕書那麼辛苦，比如目錄和索引都是可以自動的。不過前提是你得是 Word 高手，而成爲 Word 高手的人不多於 TeX 高手，就好像高中數學聯賽國三 [1] 得主不比數學博士多。

h3. Device Independent

Device Independent 本來是形容 TeX 的編譯結果 dvi 文件。不過對於我們用戶來說，又有不同意義。
現在平板電腦流行， Windows 的地位受到多方挑戰，用戶往往經常轉戰多個平臺。如果使用其他商業軟件，難免會在某些平臺下不好書寫。 TeX 就不存在這個問題，他是文本文件，隨意編輯。平時我們可以不裝他，衹有寫完了編譯的時候纔裝。
Device Independent 還有一個意義，即，我們可以用任何自己覺得舒服的文本編輯器去處理他，而不必忍受略慢的 Word 或奇慢的 InDesign 。一臺 P3 的電腦就能滿足日常編輯需求， CPU 神馬的等編譯時再說吧。

h3. 乾淨的文件

Word 和 InDesign 的文件都較髒。而 TeX 是純文本，除非你自己不講衛生，不然都很乾淨。
什麼叫髒？比如在 Word 把一段話設置爲紅色再藍色再綠色最後改回黑色，然後保存，結果文件竟然變大了，因爲程序在你變一次顏色的時候不是消掉原來的顏色再加上新顏色，而是直接加。 Word 內部也有他的標記語言，比如剛纔的修改，他可能是這樣的：文字——[紅色]文字[紅色]——[紅色][藍色]文字[藍色][紅色]——[紅色][藍色][綠色]文字[綠色][藍色][紅色]——[紅色][藍色][綠色][黑色]文字[黑色][綠色][藍色][紅色]。所以你越改動，文件就越大。

h3. 擴展性

TeX 是開源軟件，衹要水平夠，你可以用來排任何古怪但有規律的東西。
換句話說，沒有解決不了的問題，只有解決不了問題的人。
當然了，如果不是高手，很難搞定一些困難的問題。

h3. 縮寫

其實 TeX 也可以像 html 有 CSS 那樣偷懶的，那就是用戶自定義。你可以把一長串命令定義爲一個斜杠加一對大括號再加兩個字母。

h3. 裝逼

如果要找出世界上逼格最高的軟件， TeX 自然排名第一。原因是他的用戶基本上全都是學界裏的人，特別西方理工科語境下，如果一個人說不知道 TeX ，可以斷定他的文憑不高於本科。

h2. TeX 的「競爭對手」

雖然已經羅列了 TeX 的優點，不過還是稍稍對比一下好了。

h3. 方正書版

方正書版擁有很多 TeX 的優點。他是中國排名第一的排版軟件，也是國產軟件的佼佼者。方正書版對古籍排版很有一套，很多東西的實現相當好，很多情況甚至優於 TeX 的現有宏包，而且發排速度飛快，程序也較清爽。那爲什麼我們還要研習 TeX 呢？
TeX 開源。有問題慢慢想還是能解決的，而書版如果沒有某個功能，就衹好乾瞪眼。
用 TeX 能接觸到更多較底層的東西（開源嘛），學習更多知識，增強排版能力，鍛煉堅強心性。
TeX 免費。書版最新的破解版已是十年前的了， 2008 版價格爲 6460 人民幣。
TeX 跨平臺。這優勢不很明顯，因爲除了調試、發排沒人整天編譯。
TeX 社區活躍。書版除了 CPC 和方正自己的論壇，幾乎沒人討論。
TeX 精度更高。跟 TeX 比精度那是找死。

h3. Adobe InDesign

InDesign 也是業內知名軟件，而且從「排出來」的角度來講，無所不能。但我就是不想用：
慢。 Adobe 沒有不慢的。
弱爆了的批量操作。 WYSIWYG 的死穴。
商業化。他不會讓你接觸底層的東西，也不會理你的小衆需求。然後你還要找破解。
見鬼了的源文件。書版還能用文本編輯器編輯， InDesign 必須用他自己來編輯。

h3. Word

這貨不是排版軟件，你有這功夫折騰 Word 那風騷的時濃時淡的墨色、時大時小的行距，幹嘛不用 Powerpoint 或者 Photoshop 來排書？
雖然很多人喜歡拿來比，不過我認爲沒意義。還不如對比 Word 和 AutoCAD 呢。

h2. 歧途

TeX 是我見過學習歧途最多的軟件——可能是開源而且龐雜的緣故罷？姑且羅列幾條。

h3. 發音

TeX 的發音彷彿世界難題一樣，總是要討論一番。其實很簡單，音標是 [tex] 。我看到學過英語的中國朋友在後排舉手，表示不認識這個 [x] ，藉此斷定我老人家的音標寫錯了。
我老人家怎麼會寫錯呢，是你英語老師沒學過音標週期表 IPA 啊。比如他一定不懂 [h] 和漢語拼音的 h 的輔音部分發音上的區別。事實上， [x] 的發音就個漢語拼音的 h 的輔音部分完全相同。

h3. TeX 很難學不會

對個性不強的人來說， TeX 的難度基本上是體系混亂造成的。基本功能的實現比 html 還簡單。
本文的一個目的是告訴你， TeX 東亞化確實很難，而西化很簡單。
TeX 也許跟許多用戶所熟悉的體系非常不同，故而彷彿不易掌握。沒關係，一次學不會，刪掉，半年後再學學，再刪掉，再等半年一年。不單是 TeX ，很多事都可以用這種手段處理。

h3. 高手纔能用 TeX 排版出複雜 fancy 的東西

學了就是高手。
當然前提是智商沒問題。
大學都考不上就算了。

h3. 離開 WinEdt/TeXworks 就不會用 TeX

CTeX 用戶容易犯的毛病，該發行版對二者的設置很好，又不去教用戶如何進一步設置。
這個問題我會在下一部分的「編輯器」小節談到。

h3. 使用他人模版

你妹的模版，初學者絕對不該使用！一個模版往往包含將近十個宏包，新手不亂完纔怪！
別人的模版是熟練者需要應付不同格式，或者是製作模版時偷構思用的！

h3. 概念混淆

網上經常看到自稱用了將近十年 TeX 的，卻搞不清發行版、引擎、編輯器、宏包之間關係。老實講這種人該用商業軟件，而且實在不適合做研究。

h2. 入門

h3. 幾個入門文檔

"lnotes":http://www.dralpha.com/zh/tech/lnotes.pdf "lnotes2":http://www.dralpha.com/zh/tech/lnotes2.pdf 作者署名包太雷，個人判斷出生時間不晚於 1970 年，因爲他用了「馬尾巴的功能」 [2] 的典故。文章風趣詼諧，八卦信手拈來，而且排得較 fancy 。不過他的立場是 XeLaTeX ，直排不如 LuaLaTeX 。
"大家來學 LaTeX":http://cle.linux.org.tw/~edt1023/tex/latex123/node1.html ，臺灣李果正撰，對中文的討論過時，不過 LaTeX 基礎都已覆蓋。
很多人認爲 "lshort":http://mirrors.ctan.org/info/lshort/english/lshort.pdf 或其中文版 "lshort-zh-cn":ftp://ctan.tug.org/tex-archive/info/lshort/chinese/lshort-zh-cn.pdf 也不錯，個人覺得太囉嗦，僅最後一章有意思。
入門文檔本來不需看太多，但 TeX 很多基本概念必須掌握，多讀幾本入門文檔有助於將之灌入大腦。

h3. The TeXbook

Knuth 寫給 TeX 初學者的書，但不建議直接就讀他。該書也被廣大低手視爲「傳說中」的書，其實沒這麼恐怖。不關注公式編輯的，可以讀一下 10-15 和 20-25 這些章節，重點理解盒子。
閱讀此書對進一步理解 TeX 宏包中的命令以及製作宏包有很大作用，適合對美有獨特追求的人。

h3. 方正書版的入門文檔

看這個不會直接有助於學習 TeX ，但可以瞭解中國出版業對版心、行距等方面的習慣。

h3. 其他文檔

基本上，用到什麼就讀到什麼文檔，這是開源軟件亙古不變的道理。
而看示例文件有助於理解宏包，如果宏包附有示例，可以看看。
一般文檔和示例都是隨包的，搜一下就有了。比如 Windows 下用 Everything 找文檔，就很方便。

h3. log

編譯如果出錯， log 往往能給予極大提示。

h2. 環境

h3. 引擎

"CTAN":http://www.ctan.org/topic/engine 有詳細列表，這裏重點說一下我所關注的。
Knuth TeX: 原版，由於 Knuth 本人也對他進行了封裝，這個引擎似乎不存在。
pdfTeX: 顧名思義，直接轉成 PDF 。
Omega: 看名字就不同。他主要是爲中日韓蒙滿等特殊文字走向而開發的，不過已經停了。
XeTeX: 對字體很有一套，編譯時後臺直接把中間產物 xdv 轉成 PDF ，所以較方便。
pTeX: 日本引擎，對直排沒需求的沒必要折騰。
LuaTeX: 吸收 pdfTeX 和部分在 Omega 基礎上製作的 Aleph ，支持直轉 PDF 和方便的字體。由於 Lua 是腳本語言，速度差點。

h3. 包

Plain TeX: Knuth TeX 封裝成包。相關知識掌握後不會過期，且在所有 TeX 引擎上均能使用，缺點是他用起來繁瑣且內建功能少。
LaTeX: 主要是加了文檔類，並留下很好的發展空間。由於友好且認可度很高，知識保質期也很長。
ConTeXt: LaTeX 內核精煉，功能實現大量依賴宏包，而 ConTeXt 是自身強大，以避免宏包衝突的問題——強得有點像商業軟件。由於普及度不高，相關敎程也較少。

h3. 發行版

糾結這問題的新手居多。
目前 Windows 下較常用的發行版有 TeX Live, MiKTeX, W32TeX 。其他多是衍生物。
TeX Live: 宏偉的跨平臺發行版，很大，很全，安裝很簡便，適合新手—— Live 都這樣嘛。
MiKTeX: 也很大很全，好多人都根據他來弄發行版。
CTeX: MiKTeX 的基礎上爲不懂編程的菜鳥做了一些設置，不過有不少問題，不建議使用。
W32TeX: 小鬼子作品，沒有整體打包下載，東西也不齊，安裝器如 AbTeXInstaller 也不太好用。日本人討論時喜歡以這貨爲例，適合二鬼子和需要日本宏包的。
我的看法：上手用 TeX Live ，學日本或熟練各種配置了用 W32TeX 。
其他發行版見 "CTAN":http://www.ctan.org/topic/distribution

h3. 編輯器

任何一款合格的文本編輯器都可以編輯並設置編譯。比如常見的 Vim, Emacs, SciTE, Notepad++, EditPlus, EmEditor, UltraEdit, AkelPad... 目前我用 EverEdit 來寫。
日文的 "TeX Wiki":http://oku.edu.mie-u.ac.jp/~okumura/texwiki/ 裏有個「統合環境」，介紹了主流開源文本編輯器的配置方法。
本文給一個該站沒有的例子—— EmEditor 下 upLaTeX 一次性二步編譯爲 PDF：
先寫好一個 bat 文件放在 upLaTeX 的文件夾裏——比如 W32TeX 就是在 bin 文件夾。
{% highlight bat linenos %}
@echo off
uplatex -synctex=1 -jobname="%~n1" -kanji=utf8 -guess-input-enc "%1" && dvipdfmx "%~n1"
{% endhighlight %}
再在 EmEditor —工具—外部工具—自定義工具下，標題隨便寫，命令寫剛纔那個 bat 的完整路徑，比如我的就是 @D:\W32TeX\bin\pdfuplatex.bat@ ，自變量 @$(Path)@ ，原始目錄 @$(Dir)@ ，如果需要看 log 就勾選 「使用輸出窗」並把編碼設爲 UTF-8 。其實這就是個文本編輯器使用外部工具的典型例子而已。
upLaTeX 設定相對比較複雜，因爲他編譯成 PDF 需要兩步且有一堆參數而且 EmEditor 不是直接調用 cmd 。如果是 LuaTeX ，不用寫 bat 了，直接調用 exe 就行了。
網上也有很多專門針對 TeX 開發的文本編輯器，比如 WinEdt, WinShell, Kile, TeXstudio, TeXnicCenter, TeXworks, SWP, Bakoma 等等，其中有的是商業軟件。我個人的觀點還是用自己喜歡的 general 文本編輯器，而非專門爲 TeX 找，免得不習慣。

h2. 推薦宏包

h3. geometry

進一步控制整個頁面佈局的經典宏包，主要是尺寸方面的設計。

h3. fancyhdr

製作很 fancy 的頁眉和頁腳。能基於頁面奇偶性來設置不同頁眉、頁腳，但奇偶性必須開啟 documentclass 中的 twoside 選項。

h3. color/xcolor

一本書都沒別的顏色嗎？
如果是實際印刷，多色較貴，一般用單色。但電子版多幾種顏色更好，就像我們寫代碼喜歡做高亮。

h3. sidenotes/marginnote

LaTeX 內部有一條叫 @marginpar@ 的命令，可以製作邊注。
但 marginpar 是浮動對象，所以就有了 marginnote 宏包。同時加了一串不痛不癢的功能。
而 sidenotes 基於 marginnote 但可以在邊注中加入圖片、表格。

h3. titlesec, titleps, titletoc

默認的目錄和章節號是英文的，呆板醜陋。自己動手一下，自然豐衣足食。

h3. hyperref

爲 pdf 文件添加超鏈接，等於方便讀者。

h2. 字體

字體是 TeX 一個重大問題，目前的解決方案都較差。

h3. 中文字體

這問題是個重點——如果你是比較 demanding 的人。
方正字體：中國大陸最有實力的是方正，他有大量 GBK 字體和一些大字符集字體。問題是他的字體普遍難看。本來方正可以做好看的，偏偏不務正業，整天搞什麼字跡字體，淨找些醜書來做。
日本字體：日本字體最漂亮，但缺字較多（還好繁體缺字較少），而且有些字更符合他們的書寫習慣，考慮到其他新字形更糟糕，也無所謂了。
Adobe 字體：比較專業，功能豐富，不過注意版權，還有美感方面差一點。
民間字體：就是一些業餘人士製作的字體，比如康熙字典體之類，粗製濫造，根本沒法看。
臺灣字體：大五碼缺很多正體字，值得關注的是中研院那套，但一套字體一大堆文件，不很好用。
其他亞洲字體：韓國、越南都有漢字字體，比日本還詭異。

h3. XeTeX/XeLaTeX

要在 XeTeX 直排，必須是支持 vertical 命令的字體，一般需要 otf 。但是標點需要完美的 vert 命令，而一般字體不完美。
解決方案：
一、用強大的字體，如 AdobeSongStd-Light.otf ，支持的命令更加豐富，可以保持標點符號正確性。一般 otf 較好，但冒號經常不行。
二、用更複雜的命令，比如標點一律使用 AdobeSongStd-Light.otf 的標點。這個辦法需要 zhspacing 宏包，跟 xeCJK 有點衝突。

h3. LuaTeX-ja

有了 luatexja-fontspec ，字體很好弄。 LuaTeX-ja 環境下直排時字體的問題相對少一點，但仍讓人心煩。

h2. Dirty Hacks \& Monkey Patches

這裏記錄一下自己弄的噁心貨。

h3. 直排標點

一般情況下，使用 vert 這個 feature 可以使得大部分標點符號看起來正常些，但也有一些符號死不悔改，非要我們強制糾正。

h4. 冒號

冒號在直排下本來就和橫排看起來一樣，但是很多字體加了 vert 會睡下來。
需要專門爲冒號指定字體，這就導致源文件看起來很醜且輸入麻煩，或者編譯時比較麻煩。

h4. 破折號

破折號的編碼有好幾種。
U+2014 是最正確的，但他在直排情況下很多字體顯示爲橫的。
U+FE31 是專排直排的，顯示沒問題，但源文件肯定不會這麼寫。
U+2500 是劃線符號，不過看起來和破折號很像。
U+2015 兩根線之間有明顯縫隙，但也勉強能用
問題雖然可以解決，卻也和冒號的情況一樣。

h4. 書名與人名

人名用直線、書名用波浪線，這是比較好看的標點。以前由於波浪線難弄，改成了俄文引號，現在大可恢復。不過，在直排 TeX 的世界裏，這又是一件大工程。
ulem 是個鼓搗下劃線的宏包。但在中文環境下不自動折行。
CJKulem 提供了中文環境下劃線文字的自動折行，運行需要 ulem 。不過 XeTeX 直排時基線是錯的，所以劃線的位置也是錯的。況且他的直排在左邊，不在我喜歡的右邊（我的習慣很日本是不是）。
udline 是日本人做的，不但有下劃線，還有上劃線，且在 pTeX 環境下自動適應爲下劃線在右側。但是在 XeTeX/XeLaTeX 下不整齊，在 LuaTeX-ja 環境下不能完美適應直排（比如波浪線是橫着的）。
搞半天發現，還是 udline 這塊爛泥比較可能糊上牆，於是改了一句代碼，能在直排下用人名和書名就行了，其他不管。

h4. 位置

雖然一般是放右上角，直排還是居中較美觀。
xeCJK 下可以用 MiddlePunct ，但 LuaTeX 不能用這個包。

h2. 有用的網站

"Google":http://google.com 使用開源軟件時，百度壓根不行。搜索結果中如果有 pdf ，往往是宏包文檔或樣張。
"CTAN":http://www.ctan.org/ "TUG":http://www.tug.org/ 宏包、文檔、發行版大全。當然，不會太全。
"LaTeX 官網":http://www.latex-project.org/
"StackExchange":http://tex.stackexchange.com "StackOverflow":http://stackoverflow.com "LaTeX Community":http://latex-community.org/ 相當於 TeX 的百度知道。
"Wikibooks - LaTeX":http://en.wikibooks.org/wiki/LaTeX
"TeXdoc online":http://texdoc.net/
"CTeX":http://ctex.org 論壇可提問。 "Online Documents":http://www.ctex.org/OnlineDocuments 也可以用。
"LaTeX 命令速查手册":http://www.tongji.edu.cn/~yin/cn/latexfast.html
"LaTeX 編輯部":http://zzg34b.w3.c361.com/index.htm 「 LaTeX2e 完全学习手册」一書的相關網站，有一些資料。
"TeX Wiki":http://oku.edu.mie-u.ac.jp/~okumura/texwiki/ 一個日本人寫的 Wiki 式網站。
"電脳世界の奥底にて":http://zrbabbler.sp.land.to/index.html 雖然日文的東西我能看懂的不到三成，不過眞有點用。





fn1. 聯賽頗複雜，先初賽，再省級聯賽，各省省一的前若干名可參加全國聯賽，全國參加人數約二百。聯賽有特定題型和知識範圍，就算給你牛頓、愛因斯坦的智商也很難不經培訓就獲得國三。

fn2. 典故來自 1975 年的電影「決裂」，裏面有個南方的大學，學生想瞭解養牛的農技，但教授堅持學術，講授南方較少的馬，而且電影爲了諷刺教授，專說這名教授在講「馬尾巴的功能」。電影的思想是極左的，認爲大學不如農田，學術不如經驗，「馬尾巴的功能」當然不如如何養牛重要——其實這些學生根本不該上大學，職高比較適合他們。這種思想在改革開放後受到完全的否定，因此其後觀看此片的人極少。筆者也是因一個偶然的機會看到了電影的大綱，纔下載來看的。在此筆者順帶將此片推薦給青年即外籍中國史研究者，相信大家一定會喜歡。